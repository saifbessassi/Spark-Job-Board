<sp-spinner *ngIf="isLoading"></sp-spinner>

<div class="card-body">
    <h3>Sign In</h3>
    <div class="vertical-space-30"></div>
    <div class="row justify-content-center">  
        <button (click)="socialSignIn('facebook')" type="button" class="sp-btn btn-facebook">
            <i class="fab fa-facebook-square"></i>  Login with facebook
        </button>
        <button (click)="socialSignIn('google')" type="button" class="sp-btn btn-google">
            <i class="fab fa-google"></i>  Login with google
        </button>  
    </div>
    <hr>
    <h5>Or Sign In with your email</h5>
    <div class="vertical-space-30"></div>
    <sp-error-msg *ngIf="error_msg" [error_msg]="error_msg"></sp-error-msg>
    <div *ngIf="login_error?.length">
        <sp-error-msg *ngFor="let error of login_error" [error_msg]="error"></sp-error-msg>
    </div>
    <div class="row justify-content-center">
        <div class="col-md-8">
            <form role="form" [formGroup]="loginForm" (ngSubmit)="emailSignin()">
                <!-- Email address -->
                <div class="form-group mb-3" [ngClass]="{'focused':focus===true}">
                    <div class="input-group input-group-alternative sp-border">
                        <div class="input-group-prepend">
                            <span class="input-group-text sp-input-white"><i class="fas fa-envelope"></i></span>
                        </div>
                        <input
                            formControlName="email"
                            class="form-control sp-input-white"
                            placeholder="Email address"
                            pattern=".+@.+\..+"
                            type="email"
                            (focus)="focus=true"
                            (blur)="focus=false">
                    </div>
                    <div class=" text-left" *ngIf="loginForm.get('email').touched && loginForm.get('email').errors">
                        <span 
                            class="help-block"
                            *ngIf="loginForm.get('email').errors.required">
                            Email is required !
                        </span>
                        <span 
                            class="help-block"
                            *ngIf="loginForm.get('email').errors.pattern">
                            Email must be a valid email address !
                        </span>
                    </div>  
                </div>

                <!-- Password -->
                <div class="form-group" [ngClass]="{'focused':focus1===true}">
                    <div class="text-right">
                        <a [routerLink]="['']" class="text-left">
                            <small>Forgot password?</small>
                        </a>
                    </div>
                    <div class="input-group input-group-alternative sp-border">
                        <div class="input-group-prepend">
                            <span class="input-group-text sp-input-white"><i class="fas fa-lock"></i></span>
                        </div>
                        <input
                            formControlName="password"
                            class="form-control sp-input-white"
                            placeholder="Password"
                            type="password"
                            (focus)="focus1=true"
                            (blur)="focus1=false">
                    </div>
                    <div class=" text-left" *ngIf="loginForm.get('password').touched && loginForm.get('password').errors">
                        <span 
                            class="help-block"
                            *ngIf="loginForm.get('password').errors.required">
                            Password is required !
                        </span>
                        <span 
                            class="help-block"
                            *ngIf="loginForm.get('password').errors.minlength">
                            Password must be at least 8 characters !
                        </span>
                    </div>
                </div>
                
                <!-- Submit -->
                <div class="row justify-content-center">
                    <button type="submit" class="sp-btn sp-btn-red" [disabled]="!loginForm.valid">Sign in</button>
                </div>
            </form>
        </div>
        <div class="vertical-space-30"></div>
        <p>Don't have an account? <a [routerLink]="['/auth/signup']"><u>Register</u></a></p>
    </div>
</div>